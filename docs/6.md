## Обработка ошибок express
- Все сервисы должны одинаково обрабатывать ошибки => пишем общий обработчик ошибок
- И эти ошибки не только валидация. Все эти варианты нужно правильно обрабатывать => обработка всех возможных ошибок 
- Создаем реализацию от Error со своей структурой. Под каждый тип ошибок - свой Error. + Для неизветных ошибок делаем generic обработку

## Авторизация в mircorservices
- Авторизация в микросервисах - это ансолвд проблема
- Вариант 1: делать sync запрос в сервис авторизации. Падает сервис - падают юзеры.
- Вариант 2: гейт в видет AuthService. Падает сервис - сервисы не получают запросы.
- Вариант 3: каждый сервис знает как проверить юзера с помощью shared логики. Проблема с контролем сессии. Как нам забанить юзера? Все сервисы не знают об этом бане, только AuthService.

Как решить проблему 3 варианта?
- Хранить expire и делать рефреш JWT через AuthService синхронно или асинхронно отдавая reject по http
- Отправлять event из AuthService в EventQueue и в сервисах хранить в памяти статусы юзеров

JWT или Cookie?
- JWT - механизм авторизации/аутентификации, хранит данные, обрабатываем ручками
- Cookie - транспортный механизм, отправляет любые данные меж клиентом и сервером, автоматически обрабатывается браузером

Что нам нужно?
- говорит нам детали а юзере
- иметь безопасный механизм удаления и expire 
- крос язычность и доступность
- не нужно хранить данные на бэке

Это все JWT
